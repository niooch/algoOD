\documentclass[11pt,a4paper]{article}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[polish]{babel}
\usepackage{lmodern}
\usepackage[final]{microtype}
\usepackage{tikz}
\usepackage{enumitem}
\usetikzlibrary{arrows.meta,positioning,calc}

% ======= Parametry do łatwej zmiany liczby węzłów =======
\newcommand{\nI}{3} % liczba dostawców |I|
\newcommand{\nJ}{4} % liczba odbiorców |J|
\setlength{\headheight}{14.5pt} % poprawka do fancyhdr

% ======= Style rysunku =======
\tikzset{
  supplier/.style = {circle, draw, thick, minimum size=8mm, font=\small, fill=blue!5},
  demand/.style   = {circle, draw, thick, minimum size=8mm, font=\small, fill=green!5},
  cost/.style     = {font=\scriptsize, midway, sloped, fill=white, inner sep=1pt},
  supply/.style   = {font=\scriptsize, right=2mm},
  demandlab/.style= {font=\scriptsize, left=2mm},
  every edge quotes/.style = {auto, text=black},
  edge/.style     = {thin, -{Latex[length=2mm]}, draw=black!60}
}


\usepackage[a4paper,margin=2.5cm]{geometry}
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{} % czyść wszystko
\lhead{Lista 2.}
\rhead{\leftmark}
\cfoot{\thepage}

\usepackage{amsmath,amssymb,amsthm,mathtools}
\usepackage{siunitx} 
\sisetup{locale = PL}
\usepackage{bm}     

\usepackage[hidelinks]{hyperref}
\usepackage[nameinlink,capitalise,noabbrev]{cleveref}
\usepackage{csquotes}

\usepackage{enumitem}
\setlist{noitemsep,topsep=3pt}
\usepackage{xcolor}

\numberwithin{equation}{section}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{2}

\title{Sprawozdanie -- Laboratoria 2.}
\author{Jakub Kogut}
\date{\today}

\begin{document}
\maketitle

\section{Zadanie 1.}
Zadanie 1. przedstawia problem transportowy, gdzie celem jest minimalizacja kosztów przewozu towarów producentów (supplyers) do odbiorców (demand). 

\subsection{Opis modelu}
Mamy dane:
\begin{itemize}
    \item Zbiór dostawców paliwa (firmy paliwowe -- supply) $S = \{1, 2, \ldots, m\}$, gdzie $m$ to liczba dostawców.
    \item Zbiór odbiorców paliwa (lotniska -- demand) $D = \{1, 2, \ldots, n\}$, gdzie $n$ to liczba odbiorców.
    \item $s_i\geq 0$ -- ilość paliwa dostępna u dostawcy $i \in S$.
    \item $d_j \geq 0$ -- ilość paliwa wymagana przez odbiorcę $j \in D$.
    \item $c_{ij} \geq 0$ -- koszt transportu jednostki paliwa od dostawcy $i \in S$ do odbiorcy $j \in D$.
\end{itemize}
\subsubsection{Definicje zmiennych decyzyjnych}
Zmiennymi decyzyjnymi są:
\begin{itemize}
    \item $x_{ij}$ -- ilość paliwa transportowana od dostawcy $i \in S$ do odbiorcy $j \in D$.
\end{itemize}

Problem można zwizualizować grafem:
\begin{center}\begin{tikzpicture}[x=1cm,y=1.2cm]

% Kolumny
\def\xL{0}      % x lewa kolumna (dostawcy)
\def\xR{6}      % x prawa kolumna (odbiorcy)

% ======= Węzły po lewej: dostawcy S_i z podażą s_i =======
\foreach \i in {1,...,\nI} {
  \node[supplier] (S\i) at (\xL, {-(\i-1)}) {$S_{\i}$};
  \node[supply]   at ($(S\i.east)$) {$s_{\i}$};
}

% ======= Węzły po prawej: lotniska/odbiorcy D_j z popytem d_j =======
\foreach \j in {1,...,\nJ} {
  \node[demand] (D\j) at (\xR, {-(\j-1) + 0.5*(\nI-\nJ)}) {$D_{\j}$};
  \node[demandlab] at ($(D\j.west)$) {$d_{\j}$};
}

% ======= Krawędzie kompletne z opisem kosztu c_{ij} =======
\foreach \i in {1,...,\nI} {
  \foreach \j in {1,...,\nJ} {
    \draw[edge] (S\i) -- (D\j)
      node[cost] {$c_{\i\j}$};
  }
}

% ======= Opisy zbiorów =======
\node[font=\small] at (\xL, {1}) {$\text{Dostawcy } I=\{1,\dots,\nI\}$};
\node[font=\small] at (\xR, {1}) {$\text{Odbiorcy } J=\{1,\dots,\nJ\}$};
\end{tikzpicture}\end{center}

\subsubsection{Funkcja celu}
Celem jest minimalizacja całkowitych kosztów transportu paliwa, co można zapisać jako:
\[
    \min \sum_{i \in S} \sum_{j \in D} c_{ij} x_{ij}
\]
\subsubsection{Ograniczenia}
Ograniczenia, które musi spełniać model to:
\begin{itemize}
    \item podaż dla każdego dostawcy $i \in S$ nie może przekroczyć jego możliwości produkcyjnych:
        \[
            \sum_{j \in D} x_{ij} \leq s_i
        \]
    \item popyt dla każdego odbiorcy $j \in D$ musi być w pełni zaspokojony:
        \[
            \sum_{i \in S} x_{ij} = d_j
        \]
    \item zmienne decyzyjne nie mogą być ujemne:
        \[
            x_{ij} \geq 0, \quad \forall i \in S, j \in D
        \]
    \item aby egzemplarz problemu był możliwy do rozwiązania, całkowita podaż musi być mniejsza bądź równa całkowitemu popytowi:
        \[
            \sum_{i \in S} s_i \geq \sum_{j \in D} d_j
        \]
\end{itemize}

\subsection{Opis rozwiązywanych egzemplarzy}
Kod rozwiązujący egzemplarze znajduje się w pliku \texttt{kody/transport.jl}. W pliku należy podać dane: 
\begin{itemize}
    \item wektor podaży $s$,
    \item wektor popytu $d$.
    \item macierz kosztów transportu $C$,
\end{itemize}
Dla danych podanych w zadaniu mamy zadane 4 lotniska (odbiorców) i 3 firmy paliwowe (dostawców). Ilości paliwa są podane w galonach, a koszty transportu w dolarach za galon:
\begin{itemize}
    \item $s = [275000, 550000, 660000]$,
    \item $d = [110000, 220000, 330000, 440000]$,
    \item $
        C = \begin{bmatrix}
            10 &10&9&11 \\
            7&11&12&13 \\
            8&14&4&9\\
        \end{bmatrix}
        $
\end{itemize}
otrzymujemy następujące rozwiązanie:
    \[
        X = \begin{bmatrix}
            0 & 165000 & 0 & 110000 \\
            110000 & 55000 & 0 & 0 \\
            0 & 0 & 330000 & 330000 \\
        \end{bmatrix}
    \]
    gdzie $X=[x_{ij}]$ to macierz ilości paliwa transportowanego od dostawców do odbiorców. 

\subsection{Wnioski}
\begin{enumerate}[label=(\alph*)]
    \item Całkowity, minimalny koszt transportu wynosi \num{8525000}.
    \item Tak, każda firma paliwowa wysyła paliwo do więcej niż jednego lotniska:
        \[
            \sum_{j} x_{1j} > 0, \quad \sum_{j} x_{2j} > 0, \quad \sum_{j} x_{3j} > 0
        \]
    \item Nie, nie każda firma paliwowa wysyła całkowicie swoją potencjalną produkcję paliwa:
        \[
            \sum_{j} x_{1j} = 275000 = s_1, \quad \textcolor{red}{\sum_{j} x_{2j} = 165000 < s_2}, \quad \sum_{j} x_{3j} = 660000 = s_3
        \]
\end{enumerate}

\section{Zadanie 2.}
Zadanie przedstawia problem zarządzania linią produkcyjną, w której dostępne są różne maszyny do obróbki surowców w celu produkcji określonych wyrobów gotowych. Celem jest maksymalizacja zysku z produkcji przy jednoczesnym spełnieniu ograniczeń dotyczących zasobów i zdolności produkcyjnych maszyn.
\subsection{Opis modelu}
Mamy dane:
\begin{itemize}
    \item Zbiór maszyn $M = \{1, 2, \ldots, m\}$, gdzie $m$ to liczba maszyn.
    \item Zbiór wyrobów gotowych $P = \{1, 2, \ldots, n\}$, gdzie $n$ to liczba wyrobów.
    \item $a_{mp} \geq 0$ -- czas obróbki jednoski materiału $m \in M$ w jednostce czasu na maszynie $p \in P$.
    \item $H_m$ -- dostępny czas pracy maszyny $m \in M$.
    \item $u_p \geq 0$ -- maksymalny popyt na wyrób $p \in P$.
    \item $r_p \geq 0$ -- zysk ze sprzedaży jednostki wyrobu $p \in P$.
    \item $c_p \geq 0$ -- koszt mareiałów potrzebnych do produkcji jednostki wyrobu $p \in P$.
    \item $d_m \geq 0$ -- koszt eksploatacji maszyny $m \in M$ na jednostkę czasu pracy.
\end{itemize}

\subsubsection{Definicje zmiennych decyzyjnych}
Zmiennymi decyzyjnymi są:
\begin{itemize}
    \item $x_p$ -- ilość wyprodukowanych jednostek wyrobu $p \in P$.
\end{itemize}
%graf
%TODO: zastanowic sie na tym rysunkiem, czy jest wogole potrzebny
\newcommand{\nM}{3} % liczba maszyn
\newcommand{\nP}{4} % liczba wyrobów

% ===== Style =====
\tikzset{
  machine/.style  = {rectangle, draw, thick, rounded corners=2pt, minimum width=15mm, minimum height=8mm, font=\small, fill=blue!6},
  product/.style  = {rectangle, draw, thick, rounded corners=2pt, minimum width=15mm, minimum height=8mm, font=\small, fill=green!6},
  edge/.style     = {thin, -{Latex[length=2mm]}, draw=black!60},
  etime/.style    = {font=\scriptsize, midway, sloped, fill=white, inner sep=1pt},
  mcap/.style     = {font=\scriptsize, right=2mm},
  dem/.style      = {font=\scriptsize, left=2mm},
  price/.style    = {font=\scriptsize, below=1.2mm},
  docbox/.style   = {draw, rounded corners, align=left, font=\scriptsize, fill=yellow!12}
}
\begin{center}
\begin{tikzpicture}[x=1cm,y=1.2cm]

% Kolumny
\def\xL{0}   % maszyny
\def\xR{7}   % wyroby

% ===== Maszyny: M_m z dostępnością H_m =====
\foreach \m in {1,...,\nM} {
  \node[machine] (M\m) at (\xL, {-(\m-1)}) {$M_{\m}$};
  \node[mcap]    at ($(M\m.east)$) {$H_{\m}$};
}

% ===== Wyroby: P_p z ograniczeniem popytu u_p, ceną r_p i kosztem materiału c^mat_p =====
\foreach \p in {1,...,\nP} {
  \node[product] (P\p) at (\xR, {-(\p-1) + 0.5*(\nM-\nP)}) {$P_{\p}$};
  \node[dem]     at ($(P\p.west)$) {$u_{\p}$};
  \node[price]   at ($(P\p.south)$) {$r_{\p},\; c^{\text{mat}}_{\p}$};
}

% ===== Krawędzie z czasami obróbki a_{mp} (min/kg) =====
\foreach \m in {1,...,\nM} {
  \foreach \p in {1,...,\nP} {
    \draw[edge] (M\m) -- (P\p)
      node[etime] {$a_{\m\p}$};
  }
}

% ===== Podpisy grup =====
\node[font=\small] at (\xL, {1})  {$\text{Maszyny } M=\{1,\dots,\nM\}$};
\node[font=\small] at (\xR, {1})  {$\text{Wyroby } P=\{1,\dots,\nP\}$};

\end{tikzpicture}
\end{center}
\subsubsection{Funkcja celu}
Celem jest maksymalizacja zysku z produkcji wyrobów, co można zapisać jako:
\[
    \max \underbrace{\sum_{p \in P} r_p x_p}_{\text{przychód}} - \underbrace{\sum_{p \in P} c_p x_p}_{\text{koszt materiałów}} - \underbrace{\sum_{m \in M} d_m \left( \sum_{p \in P} a_{mp} x_p \right)}_{\text{koszt eksploatacji maszyn}}
\]
Co można uprościć do:
\[
    \max \sum_{p \in P} \left( r_p - c_p - \sum_{m \in M} d_m a_{mp} \right) x_p
\]
\subsubsection{Ograniczenia}
Ograniczenia, które musi spełniać model to:
\begin{itemize}
    \item Dostępność czasu pracy każdej maszyny $m \in M$ nie może zostać przekroczona:
        \[
            \sum_{p \in P} a_{mp} x_p \leq H_m
        \]
    \item Produkcja każdego wyrobu $p \in P$ nie może przekroczyć maksymalnego popytu oraz musi być nieujemna:
        \[
            0 \leq x_p \leq u_p
        \]
\end{itemize}

\subsection{Opis rozwiązywanych egzemplarzy}
Kod rozwiązujący egzemplarze znajduje się w pliku \texttt{kody/schedule.jt}. W pliku należy podać dane:
\begin{itemize}
    \item macierz czasów obróbki $A$ [min/kg],
    \item wektor dostępnych czasów pracy maszyn $H$ [min],
    \item wektor maksymalnego popytu $u$ [kg],
    \item wektor zysków ze sprzedaży $r$ [\$/kg],
    \item wektor kosztów materiałów $c$ [\$/kg],
    \item wektor kosztów eksploatacji maszyn $d$ [\$/min].
\end{itemize}
W przykładzie z zadania mamy $P=\{1,2,3,4}$ wyrobów oraz $M=\{1,2,3\}$ maszyn. Dane wejściowe to:
\begin{itemize}
    \item $A = \begin{bmatrix}
            5 &3 &4 &4 \\
            10&6&5&2\\
            6&4&3&1\\
        \end{bmatrix}$, gdzie $A=[a_{mp}]$, dla $m \in M$, $p \in P$,
    \item $H = [3600,3600,3600]$
    \item $u = [400, 100, 150,500]$,
    \item $r = [9,7,6,5]$,
    \item $c = [4,1,1,1]$,
    \item $d = [2,2,3]$.
\end{itemize}
Otrzymujemy następujące rozwiązanie:
\[
    X = [125,100,150,500] \quad X=[x_p]$ \text{to wektor ilości wyprodukowanych jednostek wyrobów} p \in P
\]
Maksymalny zysk wynosi \num{3632.5} dolarów.
Czas pracy maszyn wynosi odpowiednio:
\begin{itemize}
    \item Maszyna 1: $3525$ min,
    \item Maszyna 2: $3600$ min,
    \item Maszyna 3: $2100$ min.
\end{itemize}

\section{Zadanie 3.}
W tym zadaniu należy znaleść optymalny plan produkcji oraz magazynowania towaru przez pewną firmę, która w danym okresie czasu może zwiększać jego produkcję lub magazynować nadwyżki w celu zaspokojenia przyszłego popytu.
\subsection{Opis modelu}
Mamy dane:
\begin{itemize}
    \item Okresy czasu $T = \{1,\dots, K\}$, gdzie $K$ to liczba okresów.
    \item Maksymalna okresowa produkcja $P_{max}$ -- maksymalna ilość towaru, którą firma może wyprodukować w jednym okresie czasu.
    \item $c_j$ -- koszt produkcji jednostki towaru w nie ponadmiarowej produkcji w okresie $j \in T$.
    \item $a_j$ -- ilość możliwej dodatkowej produkcji w okresie $j \in T$.
    \item $o_j$ -- koszt produkcji jednostki towaru w ponadmiarowej produkcji w okresie $j \in T$.
    \item $d_j$ -- popyt na towar w okresie $j \in T$.
    \item $h$ -- koszt magazynowania jednostki towaru przez jeden okres czasu.
    \item $S_{max}$ -- maksymalna pojemność magazynu.
    \item $s_0$ -- początkowa ilość towaru w magazynie.
\end{itemize}

\subsubsection{Definicje zmiennych decyzyjnych}
Zmiennymi decyzyjnymi są:
\begin{itemize}
    \item $x_j$ -- ilość towaru wyprodukowana w okresie $j \in T$ w nie ponadmiarowej produkcji,
    \item $y_j$ -- ilość towaru wyprodukowana w okresie $j \in T$ w ponadmiarowej produkcji,
    \item $s_j$ -- ilość towaru magazynowana na koniec okresu $j \in T$.
\end{itemize}
\subsubsection{Funkcja celu}
Celem jest minimalizacja całkowitych kosztów produkcji i magazynowania towaru, co można zapisać jako:
\[
    \min \sum_{j \in T} \left( c_j x_j + o_j y_j + h s_j \right)
\]
\subsubsection{Ograniczenia}
Ograniczenia, które musi spełniać model to:
\begin{itemize}
    \item Bilans zapasu w każdym okresie $j \in T$:
        \[
            s_{j-1} + x_j + y_j = d_j + s_j
        \]
    \item Produkcja w nie ponadmiarowej produkcji nie może przekroczyć maksymalnej produkcji:
        \[
            0 \leq x_j \leq P_{max}
        \]
    \item Produkcja w ponadmiarowej produkcji nie może przekroczyć dostępnej dodatkowej produkcji:
        \[
            0 \leq y_j \leq a_j
        \]
    \item Ilość towaru w magazynie nie może przekroczyć jego pojemności:
        \[
            0 \leq s_j \leq S_{max}
        \]
\end{itemize}
\subsection{Opis rozwiązywanych egzemplarzy}
Kod rozwiązujący egzemplarze znajduje się w pliku \texttt{kody/production.jl}. W pliku należy podać dane:
\begin{itemize}
    \item $c$ -- wektor kosztów produkcji w nie ponadmiarowej produkcji,
    \item $o$ -- wektor kosztów produkcji w ponadmiarowej produkcji,
    \item $a$ -- wektor dostępnej dodatkowej produkcji,
    \item $d$ -- wektor popytu,
    \item $P_{max}$ -- maksymalna produkcja w okresie,
    \item $S_{max}$ -- maksymalna pojemność magazynu,
    \item $h$ -- koszt magazynowania jednostki towaru przez
    \item $s_0$ -- początkowa ilość towaru w magazynie,
\end{itemize}
Dla danych podanych w zadaniu mamy:
\begin{itemize}
    \item $c = [6000, 4000, 8000, 9000]$,
    \item $o = [8000, 6000, 10000, 11000]$,
    \item $a = [60, 65, 70, 60]$,
    \item $d = [130, 80, 125, 195]$,
    \item $P_{max} = 100$,
    \item $S_{max} = 70$,
    \item $h = 1500$,
    \item $s_0 = 15$,
\end{itemize}
otrzymujemy następujące rozwiązanie:
\begin{itemize}
    \item Okres 1: $x_1 = 100$, $y_1 = 15$, $s_1 = 0$,
    \item Okres 2: $x_2 = 100$, $y_2 = 50$, $s_2 = 70$,
    \item Okres 3: $x_3 = 100$, $y_3 = 0$, $s_3 = 45$,
    \item Okres 4: $x_4 = 100$, $y_4 = 50$, $s_4 = 0$,
\end{itemize}
\subsection{Wnioski}
\begin{enumerate}[label=(\alph*)]
    \item Całkowity minimalny koszt produkcji i magazynowania to \num{3842500}\$.
    \item W okresach 1, 2 i 4 firma korzysta z ponadmiarowej produkcji:
        \[
            y_1 = 15 > 0, \quad y_2 = 50 > 0, \quad y_4 = 50 > 0
        \]
    \item W okresach 1 oraz 4 magazyn jest pusty na koniec okresu:
        \[
            s_1 = 0, \quad s_4 = 0
        \]
\end{enumerate}

\section{Zadanie 4.}
W zadaniu dany jest Graf $G=(N,A)$, gdzie $N$ to zbiór wierzchołków -- miast, a $A$ to zbiór łuków -- dróg łączących miasta. Celem jest znalezienie najtańszej trasy z miasta początkowego $j^{\circ} \in N$ do miasta docelowego $j^{\circ} \in N$, która nie przekracza określonego czasu podróży $T$.
\subsection{Opis modelu}
Mamy dane:
\begin{itemize}
    \item Zbiór miast $N = \{1, 2, \ldots, n\}$, gdzie $n$ to liczba miast.
    \item Zbiór dróg $A \subseteq N \times N$, gdzie każda droga $(i,j) \in A$ łączy miasto $i \in N$ z miastem $j \in N$.
    \item $c_{ij} \geq 0$ -- koszt przejazdu drogą $(i,j) \in A$.
    \item $t_{ij} \geq 0$ -- czas przejazdu drogą $(i,j) \in A$.
    \item $i^{\circ} \in N$ -- miasto początkowe.
    \item $j^{\circ} \in N$ -- miasto docelowe.
    \item $T \geq 0$ -- maksymalny dozwolony czas podróży.
\end{itemize}

\subsubsection{Definicje zmiennych decyzyjnych}
Zmiennymi decyzyjnymi są:
\begin{itemize}
    \item $x_{ij} \in \{0,1\}$ -- zmienna binarna wskazująca, czy droga $(i,j) \in A$ jest wybrana w trasie.
\end{itemize}
\subsubsection{Funkcja celu}
Celem jest minimalizacja całkowitego kosztu przejazdu z miasta początkowego do miasta docelowego, co można zapisać jako:
\[
    \min \sum_{(i,j) \in A} c_{ij} x_{ij}
\]
\subsubsection{Ograniczenia}
Ograniczenia, które musi spełniać model to:
\begin{itemize}
    \item Zachowanie przepływu w każdym mieście $k \in N$:
        \[
            \sum_{j: (k,j) \in A} x_{kj} - \sum_{i: (i,k) \in A} x_{ik} =
            \begin{cases}
                1, & \text{jeśli } k = i^{\circ} \\
                -1, & \text{jeśli } k = j^{\circ} \\
                0, & \text{w przeciwnym razie}
            \end{cases}
        \]
    \item Całkowity czas podróży nie może przekroczyć dozwolonego czasu $T$:
        \[
            \sum_{(i,j) \in A} t_{ij} x_{ij} \leq T
        \]
    \item Zmienne decyzyjne są binarne:
        \[
            x_{ij} \in \{0,1\}, \quad \forall (i,j) \in A
        \]
\end{itemize}
\subsection{Opis rozwiązywanych egzemplarzy}
Kod rozwiązujący egzemplarze znajduje się w pliku \texttt{kody/circulation.jt}. W pliku należy podać dane:
\begin{itemize}
    \item $N$ -- moc zbioru miast,
    \item $s$ -- wierzchołek początkowy,
    \item $t$ -- wierzchołek docelowy,
    \item $T_{max}$ -- maksymalny dozwolony czas podróży,
    \item $arcs$ -- lista krotek reprezentujących drogi w formacie (miastoPoczątkowe, miastoDocelowe, koszt, czas),
\end{itemize}
Dla danych podanych w zadaniu mamy:
\begin{itemize}
    \item $N = 10$,
    \item $s = 1$,
    \item $t = 10$,
    \item $T_{max} = 15$,
    \item $arcs$ -- jak podane w poleceniu zadania
\end{itemize}

otrzymujemy następujące rozwiązanie:
\begin{itemize}
%Koszt minimalny: 13.0
%Czas ścieżki:     15.0  (Tmax = 15.0)
%Ścieżka: 1 -> 2 -> 3 -> 5 -> 7 -> 9 -> 10

%Łuki w ścieżce (i,j) [c|t]:
%  (1, 2) [3.0 | 4.0]
%  (2, 3) [2.0 | 3.0]
%  (3, 5) [2.0 | 2.0]
%  (5, 7) [3.0 | 3.0]
%  (7, 9) [1.0 | 1.0]
%  (9, 10) [2.0 | 2.0]
    \item Koszt minimalny: \num{13.0},
    \item Czas ścieżki: \num{15.0} (Tmax = \num{15.0}),
    \item Ścieżka: $1 \to 2 \to 3 \to 5 \to 7 \to 9 \to 10$,
\end{itemize}
\subsection{Wnioski}
\begin{enumerate}[label=(\alph*)]
    \item Wyniki dla podanego egzemplarza znajdują się powyżej.
    \item Własny egzemplarz wygląda następująco:
        %zalacz wlasnyGraf/wlasny.png
        \begin{figure}[!ht]
            \centering
            \includegraphics[width=1.0\textwidth]{wlasnyGraf/wlasny.png}
            \caption{Własny egzemplarz zadania 4.}
            \label{fig:wlasny}
        \end{figure}
        Dla tego egzemplarza mamy:
        \begin{itemize}
            \item Najkrótsza scieżka (bez ograniczenia czasowego): $1 \to 3 \to 6$, o koszcie \num{10.0} i czasie \num{20.0},
            \item Najtańsza ścieżka z ograniczeniem czasowym $T_{max} = 15$: $1 \to 2 \to 3 \to 5 \to 7 \to 9 \to 10$, o koszcie \num{13.0} i czasie \num{15.0}.
        \end{itemize}
    \item Tak, \textbf{ograniczenie na całkowitoliczbowość jest istotne}. Rozważmy przykład \hyperref[fig:kontrprzyklad]{grafu}, gdzie mamy następujące dane:\\
        %zalacz wlasnyGraf/wlasnyKontrprzyklad.png
        \begin{figure}[!ht]
            \centering
            \includegraphics[width=0.5\textwidth]{wlasnyGraf/wlasnyKontprzyklad.png}
            \caption{Przykład grafu, gdzie ograniczenie całkowitoliczbowości jest istotne.}
            \label{fig:kontrprzyklad}
        \end{figure}
        W tym przypadku istnieją dwie ścieżki z wierzchołka $1$ do wierzchołka $4$:
        \begin{itemize}
            \item Ścieżka  $A: 1 \to 2 \to 4$, o koszcie $c_A =1$ i czasie $t_A=10$,
            \item Ścieżka $B: 1 \to 3 \to 4$, o koszcie $c_B=10$ i czasie $t_B=2$.
        \end{itemize}
        Przyjmując $T_{max} = 6$ przy założeniu całkowitoliczbowości zmiennych decyzyjnych, jedyną możliwą ścieżką jest $B$ o koszcie 10, tylko w niej zostaje spełnione ograniczenie czasowe.\\
        Natomiast relaksując założenie o całkowitoliczbowości: $x_{ij} \in [0,1]$, optymalnym rozwiązaniem byłoby $x_{12} = x_{24} = x_{13} = x_{34} = 0.5$, co odpowiadałoby trasie będącej połową ścieżki $A$ i połową ścieżki $B$. W takim przypadku koszt wyniósłby $c= \frac{1}{2} + \frac{10}{2} = 5.5$, a czas $t = \frac{10}{2} + \frac{2}{2} = 6$, co spełnia ograniczenie czasowe.\\
        Zatem istnieją różne optymalne rozwiązania w zależności od założenia o całkowitoliczbowości zmiennych decyzyjnych.
    \item Po usunięciu ograniczenia na czas przejazu oraz całkowitoliczbowość dostajemy problem najtańszego przepływu w sieci. %TODO rozwinac 4d
\end{enumerate}

\section{Zadanie 5.}
W zadaniu 5. należy rozwiązać problem podany na 2. liście ćwiczeń. Pojawia się tutaj problem \textit{MIN COST CIRCULATION}, który polega na znalezieniu najtańszego przepływu w sieci z określonymi kosztami i pojemnościami na krawędziach oraz z ograniczeniami na przepływ w wierzchołkach. Konkretnie w zadaniu mamy zminimaliować lączną liczbe radiowozów wystawionych do patroli w różnych dzielnicach miasta.
\subsection{Opis modelu}
Mamy dane:
\begin{itemize}
    \item Zbiór dzielnic $P = \{1, 2, \ldots, n\}$, gdzie $n$ to liczba dzielnic.
    \item Zbiór zmian $S = \{1, 2, \ldots, m\}$, gdzie $m$ to liczba zmian.
    \item Macierze ograniczeń dolnych i górnych na liczbę radiowozów $U_{ij}, L_{ij}$ gdzie $i \in P$, $j \in S$,
    \item Wektor minimalnej liczby dostępnych radiowozów w dzielnicy $a_i$, gdzie $i \in P$,
    \item Wektor minimalnej potrzebnej liczby radiowozów w zmianie $b_j$, gdzie $j \in S$,
\end{itemize}
\subsubsection{Definicje zmiennych decyzyjnych}
Zmiennymi decyzyjnymi są:
\begin{itemize}
    \item $x_{ij}$ -- liczba radiowozów przydzielonych do dzielnicy $i \in P$ w zmianie $j \in S$. Zakładamy całkowitoliczbowość zmiennych decyzyjnych: $x_{ij} \in \mathbb{Z}_{\geq 0}$.
\end{itemize}
\subsubsection{Funkcja celu}
Celem jest minimalizacja całkowitej liczby radiowozów przydzielonych do patroli, co można zapisać jako:
\[
    \min \sum_{i \in P} \sum_{j \in S} x_{ij}
\]
\subsubsection{Ograniczenia}
Ograniczenia, które musi spełniać model to:
\begin{itemize}
    \item Dla każdej dzielnicy $i \in P$ liczba radiowozów przydzielonych we wszystkich zmianach musi być co najmniej równa minimalnej wymaganej liczbie radiowozów:
        \[
            \sum_{j \in S} x_{ij} \geq a_i
        \]
    \item Dla każdej zmiany $j \in S$ liczba radiowozów przydzielonych we wszystkich dzielnicach musi być co najmniej równa minimalnej wymaganej liczbie radiowozów:
        \[
            \sum_{i \in P} x_{ij} \geq b_j
        \]
    \item Liczba radiowozów przydzielonych do dzielnicy $i \in P$ w zmianie $j \in S$ musi mieścić się w określonych granicach:
        \[
            L_{ij} \leq x_{ij} \leq U_{ij}
        \]
\end{itemize}
Model będzie musiał znaleść optymalny przepływ w sieci pokazanaje na rysunku poniżej:
%graf wlasnyGraf/dzielnice.png
\begin{figure}[!ht]
    \centering
    \includegraphics[width=0.8\textwidth]{wlasnyGraf/dzielnice.png}
    \caption{Model sieciowy problemu przydziału radiowozów do patroli w dzielnicach.}
    \label{fig:dzielnice}
\end{figure}
\subsection{Opis rozwiązywanych egzemplarzy}
Kod rozwiązujący egzemplarze znajduje się w pliku \texttt{kody/dzielnice.jl}. W pliku należy podać dane reprezentujące sieć postaci: $(i,j,c,l,u)$, gdzie $i$ to dzielnica, $j$ to zmiana, $c$ to koszt jednostkowy przepływu (tutaj zawsze 1), $l$ to dolna granica przepływu, $u$ to górna granica przepływu. Dla podanych w zadaniu danych otrzymujemy następujące rozwiązanie:
\begin{itemize}
%Łuki z dodatnim przepływem: (i,j) [l..u | c]  x=
    \item Całkowita liczba radiowozów przydzielonych do patroli wynosi \num{48}.
    \item Szczegóły przydziału radiowozów do dzielnic i zmian przedstawia się następująco:
        \begin{verbatim}
Łuki z dodatnim przepływem: (i,j) [l..u | c]  x=
  (1, 2) [10.0..Inf | 1.0]  x=10.0
  (1, 3) [20.0..Inf | 1.0]  x=20.0
  (1, 4) [18.0..Inf | 1.0]  x=18.0
  (2, 5) [2.0..3.0 | 0.0]  x=2.0
  (2, 6) [3.0..5.0 | 0.0]  x=3.0
  (2, 7) [5.0..8.0 | 0.0]  x=5.0
  (3, 5) [4.0..7.0 | 0.0]  x=4.0
  (3, 6) [6.0..7.0 | 0.0]  x=6.0
  (3, 7) [7.0..12.0 | 0.0]  x=10.0
  (4, 5) [3.0..5.0 | 0.0]  x=5.0
  (4, 6) [5.0..10.0 | 0.0]  x=5.0
  (4, 7) [6.0..10.0 | 0.0]  x=8.0
  (5, 8) [10.0..Inf | 0.0]  x=11.0
  (6, 8) [14.0..Inf | 0.0]  x=14.0
  (7, 8) [13.0..Inf | 0.0]  x=23.0
  (8, 1) [0.0..Inf | 0.0]  x=48.0
        \end{verbatim}
\end{itemize}

\section{Zadanie 6.}
W zdaaniu 6. pojawia się problem \textit{MIN COVER SET}. W tej konktetnej instancji musimy znaleźć optymalne rozmieszczenie minimalnej ilości kamer potrzebnych do monitorowania placu z konternerami.
\subsection{Opis modelu}
Mamy dane:
\begin{itemize}
    \item Siatkę $V=\{1,\dots, n\} \times \{1,\dots, m\}$ reprezentującą plac z kontenerami o rozmiarze $n \times m$,
    \item Zbiór z miejscami zajętymi przez kontenery $C \subseteq V$,
    \item Liczbe $k$ reprezentującą zasięg kamery (w jednostkach kratki siatki). Kamera widzi we wszytkich kierunkach pokrywając obszar w kształcie krzyża.\footnote{W poleceniu nie jest to do końca jasno sprecyzowane, czy kamera widzi w kształcie kwadratu, czy jednak krzyża, ale przyjmuję drugi wariant.}
\end{itemize}
Możemy zdefinować relację widoczności\footnote{Zakładam, że kamera widzi ponad kontenerami.} $\approx$ pomiędzy miejscami na siatce $V$. Niech $p=(r,c), q=(s,d) \in V$ to dwa miejsca na siatce. Wtedy:
\[
    p\approx q\iff (r = s \land |c-d| \leq k) \lor (c = d \land |r-s| \leq k)
\]
Na podstawie tej relacji możemy zdefiniować zbiór miejsc widocznych z miejsca $p \in V$:
\[
    W(p) = \{ q \in V : p \approx q \}
\]
\subsubsection{Definicje zmiennych decyzyjnych}
Zmiennymi decyzyjnymi są:
\begin{itemize}
    \item $x_{rc} \in \{0,1\}$ -- zmienna binarna wskazująca, czy w miejscu $(r,c) \in V$ została zainstalowana kamera.
\end{itemize}
\subsubsection{Funkcja celu}
Celem jest minimalizacja całkowitej liczby zainstalowanych kamer, co można zapisać jako:
\[
    \min \sum_{(r,c) \in V} x_{rc}
\]
\subsubsection{Ograniczenia}
Ograniczenia, które musi spełniać model to:
\begin{itemize}
    \item Kamery można instalować tylko w miejscach nie zajętych przez kontenery:
        \[
            x_{rc} = 0, \quad \forall (r,c) \in C
        \]
    \item Każde miejsce zajęte przez kontener $p \in C$ musi być widoczne z co najmniej jednej kamery:
        \[
            \forall p \in C: \sum_{q \in V\setminus C : \quad p \approx q} x_{q} \geq 1,
        \]
    \item Zmienne decyzyjne są binarne:
        \[
             \forall (r,c) \in V: x_{rc} \in \{0,1\},
        \]
\end{itemize}
\subsection{Opis rozwiązywanych egzemplarzy}
Kod rozwiązujący egzemplarze znajduje się w pliku \texttt{kody/kamery.jl}. W pliku należy podać dane:
\begin{itemize}
    \item $n$ -- liczba wierszy siatki,
    \item $m$ -- liczba kolumn siatki,
    \item $k$ -- zasięg kamery,
    \item $containers$ -- lista krotek reprezentujących miejsca zajęte przez kontenery,
\end{itemize}
Dla egzemplarza $10\times 12$ z $40$ kontenerami otrzymujemy następujące rozwiązanie:
\begin{itemize}
    \item Dla $k=2$ minimalna liczba kamer wynosi 12,
    \item Dla $k=5$ minimalna liczba kamer wynosi 8.
\end{itemize}
Poniżej wizualizacja rozwiązań dla obu zasięgów kamer:
%graf wlasnyGraf/kameryWizualizacja.png
\begin{figure}[!ht]
    \centering
    \includegraphics[width=1.0\textwidth]{wlasnyGraf/kameryWizualizacja.png}
    \caption{Wizualizacja rozmieszczenia kamer dla zasięgów $k=2$ (po lewej) oraz $k=
    5$ (po prawej).}
    \label{fig:kameryWizualizacja}
\end{figure}
\end{document}

